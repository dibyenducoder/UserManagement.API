# For more info on HTTP files go to https://aka.ms/vs/httpfile
@baseUrl = https://localhost:7145
@contentType = application/json

###########################################################
# USER MANAGEMENT API - FULL TEST SUITE
###########################################################

###########################################################
# 1️ CREATE USER - VALID REQUEST
###########################################################
POST {{baseUrl}}/api/users
Content-Type: {{contentType}}

{
  "firstName": "John",
  "lastName": "Doe",
  "email": "john.doe@company.com",
  "department": "IT"
}

###

###########################################################
# 2️ CREATE USER - INVALID EMAIL
###########################################################
POST {{baseUrl}}/api/users
Content-Type: {{contentType}}

{
  "firstName": "Jane",
  "lastName": "Smith",
  "email": "invalid-email",
  "department": "HR"
}

###

###########################################################
# 3️ CREATE USER - EMPTY FIRST NAME
###########################################################
POST {{baseUrl}}/api/users
Content-Type: {{contentType}}

{
  "firstName": "",
  "lastName": "Brown",
  "email": "brown@company.com",
  "department": "Finance"
}

###

###########################################################
# 4️ GET ALL USERS (DEFAULT PAGINATION)
###########################################################
GET {{baseUrl}}/api/users

###

###########################################################
# 5️ GET USERS WITH PAGINATION
###########################################################
GET {{baseUrl}}/api/users?page=1&pageSize=5

###

###########################################################
# 6️ GET USER BY VALID ID (CHANGE ID IF NEEDED)
###########################################################
GET {{baseUrl}}/api/users/1

###

###########################################################
# 7️ GET USER BY INVALID ID
###########################################################
GET {{baseUrl}}/api/users/9999

###

###########################################################
# 8️ UPDATE USER - VALID REQUEST
###########################################################
PUT {{baseUrl}}/api/users/1
Content-Type: {{contentType}}

{
  "id": 1,
  "firstName": "John",
  "lastName": "Updated",
  "email": "john.updated@company.com",
  "department": "Admin"
}

###

###########################################################
# 9️ UPDATE USER - ID MISMATCH
###########################################################
PUT {{baseUrl}}/api/users/1
Content-Type: {{contentType}}

{
  "id": 2,
  "firstName": "Mismatch",
  "lastName": "User",
  "email": "mismatch@company.com",
  "department": "IT"
}

###

###########################################################
# 10 UPDATE USER - INVALID EMAIL
###########################################################
PUT {{baseUrl}}/api/users/1
Content-Type: {{contentType}}

{
  "id": 1,
  "firstName": "Invalid",
  "lastName": "Email",
  "email": "not-an-email",
  "department": "IT"
}

###

###########################################################
# 1️1️ DELETE USER - VALID ID
###########################################################
DELETE {{baseUrl}}/api/users/1

###

###########################################################
# 1️2️ DELETE USER - NON-EXISTING ID
###########################################################
DELETE {{baseUrl}}/api/users/9999

###

###########################################################
# 1️3️ STRESS TEST - BULK CREATE (MANUAL RUN MULTIPLE TIMES)
###########################################################
POST {{baseUrl}}/api/users
Content-Type: {{contentType}}

{
  "firstName": "Bulk",
  "lastName": "User",
  "email": "bulk{{ $randomInt }}@company.com",
  "department": "LoadTest"
}

###

###########################################################
# 1️4️ VERIFY PAGINATION AFTER BULK INSERT
###########################################################
GET {{baseUrl}}/api/users?page=1&pageSize=3

###

###########################################################
# 1️5 Missing Token - UNAUTHORIZED ACCESS
###########################################################
GET {{baseUrl}}/api/users

###

###########################################################
# 1️6 Test Invalid Token - UNAUTHORIZED ACCESS
###########################################################
GET {{baseUrl}}/api/users
Authorization: Bearer wrong-token

###

###########################################################
# 1️7 Test Valid Token
###########################################################
GET {{baseUrl}}/api/users
Authorization: Bearer my-secret-token

###




